---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const title = "Sabbahi Sonia â€” Portfolio";
const description = "DÃ©veloppeuse conceptrice d'applications spÃ©cialisÃ©e en JavaScript, React, Astro et Python.";

// RÃ©cupÃ©ration des projets Ã  partir de la content collection "projets"
const rawProjets = await getCollection("projets");

const projets = rawProjets
  .sort((a, b) => {
    const da = new Date(a.data.date);
    const db = new Date(b.data.date);
    return db.getTime() - da.getTime();
  })
  .slice(0, 3); // On affiche les 3 plus rÃ©cents

const skills = [
  { label: "Astro", icon: "ğŸª" },
  { label: "React", icon: "âš›ï¸" },
  { label: "Tailwind CSS", icon: "ğŸ’¨" },
  { label: "JavaScript", icon: "ğŸŸ¨" },
  { label: "Node.js", icon: "ğŸŸ¢" },
  { label: "Python", icon: "ğŸ" },
  { label: "SQL", icon: "ğŸ’¾" },
  { label: "Django", icon: "ğŸŒ¿" },
];
---

<BaseLayout {title} {description}>

  <!-- HERO -->
  <section class="py-16 md:py-24 max-w-4xl mx-auto px-4 animate-fade-up">
    <div class="hero-shell p-8 md:p-10">
      <div class="grid gap-10 md:grid-cols-[3fr,2fr] items-center">

        <!-- Texte -->
        <div class="space-y-6 relative z-10">
          <p class="section-eyebrow">DÃ©veloppeuse conceptrice dâ€™applications</p>

          <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight leading-tight">
            Bonjour, je suis <span class="text-vermillion dark:text-indigo-300">Sonia</span> ğŸ‘‹
          </h1>

          <p class="text-lg opacity-80 leading-relaxed">
            Je conÃ§ois et dÃ©veloppe des applications web, des outils mÃ©tiers et des interfaces modernes
            pour des besoins concrets : Ã©quipes terrain, projets internes et entrepreneurs.
          </p>

          <p class="text-sm opacity-70">
            Mon approche&nbsp;: comprendre le fonctionnement rÃ©el du terrain, traduire les besoins en
            interfaces claires, et livrer des solutions maintenables cÃ´tÃ© technique.
          </p>

          <div class="flex flex-wrap gap-3 pt-2">
            <span class="pill-accent">
              Disponible pour des missions freelance
            </span>
          </div>

          <div class="flex flex-wrap gap-3 pt-4">
            <a href="/projets" class="btn-main text-sm">
              Voir mes projets
            </a>

            <a
              href="/contact"
              class="inline-flex items-center justify-center rounded-full px-6 py-2.5 text-sm font-medium border border-neutral-300/70 dark:border-neutral-700/70 hover:bg-neutral-100 dark:hover:bg-neutral-900 transition-colors"
            >
              Me contacter
            </a>
          </div>
        </div>

        <!-- Bloc Ã  droite : mini carte profil -->
        <div class="card-smooth p-5 space-y-4 text-sm relative z-10">
          <p class="section-eyebrow">Tech & focus</p>

          <p class="opacity-80">
            <span class="font-semibold">Stack principale :</span><br />
            JavaScript, React, Astro, Python, Django, Tailwind.
          </p>

          <p class="opacity-80">
            <span class="font-semibold">Ce que je propose :</span><br />
            Interfaces modernes, outils mÃ©tiers sur mesure, refonte dâ€™applications internes.
          </p>

          <p class="opacity-70 text-xs">
            Inspiration visuelle : minimalisme japonais, contraste maÃ®trisÃ©, couleurs douces et dÃ©tails subtils. ğŸŒ¸
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- COMPÃ‰TENCES -->
  <section class="py-16 border-t border-neutral-300/40 dark:border-neutral-700/40">
    <div class="max-w-5xl mx-auto px-4 space-y-8">
      <div class="text-center space-y-3">
        <p class="section-eyebrow">CompÃ©tences</p>
        <h2 class="text-3xl font-bold tracking-tight">Mes compÃ©tences</h2>
        <p class="text-sm opacity-75 max-w-2xl mx-auto">
          Une base solide en dÃ©veloppement front-end et back-end, avec un focus particulier sur les interfaces modernes
          et les outils mÃ©tiers utiles au quotidien.
        </p>
      </div>

      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
        {skills.map((skill) => (
          <div class="card-smooth p-3 text-center text-sm font-medium flex flex-col items-center gap-1">
            <span class="text-xl">
              {skill.icon}
            </span>
            <span>{skill.label}</span>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- PROJETS -->
  <section class="py-16 border-t border-neutral-300/40 dark:border-neutral-700/40">
    <div class="max-w-5xl mx-auto px-4 space-y-8">

      <div class="text-center space-y-3">
        <p class="section-eyebrow">Projets</p>
        <h2 class="text-3xl font-bold tracking-tight">Projets en avant</h2>
        <p class="text-sm opacity-75 max-w-2xl mx-auto">
          Quelques projets reprÃ©sentatifs de ma faÃ§on de travailler : applications internes, outils mÃ©tiers et interfaces modernes.
        </p>
      </div>

      {projets.length === 0 ? (
        <p class="text-center opacity-70">
          La section projets arrive bientÃ´tâ€¦ ğŸš§
        </p>
      ) : (
        <div class="space-y-4">
          {projets.map((projet) => (
            <a
              href={`/projets/${projet.slug}`}
              class="block card-smooth p-5 space-y-2"
            >
              <div class="flex items-start justify-between gap-3">
                <div class="space-y-1">
                  <h3 class="text-lg font-semibold">
                    {projet.data.title}
                  </h3>
                  {projet.data.description && (
                    <p class="text-sm opacity-80">
                      {projet.data.description}
                    </p>
                  )}
                </div>

                {projet.data.date && (
                  <p class="text-xs opacity-60 whitespace-nowrap">
                    {new Date(projet.data.date).toLocaleDateString("fr-FR", {
                      year: "numeric",
                      month: "short",
                    })}
                  </p>
                )}
              </div>

              {projet.data.tech && Array.isArray(projet.data.tech) && (
                <div class="flex flex-wrap gap-2 pt-1">
                  {projet.data.tech.map((t) => (
                    <span class="inline-flex items-center rounded-full border border-neutral-300/60 dark:border-neutral-700/60 px-2.5 py-0.5 text-[11px] uppercase tracking-wide opacity-80">
                      {t}
                    </span>
                  ))}
                </div>
              )}
            </a>
          ))}
        </div>
      )}

      <div class="text-center pt-4">
        <a
          href="/projets"
          class="inline-flex items-center text-sm opacity-80 hover:opacity-100 link-soft-underline"
        >
          Voir tous les projets â†’
        </a>
      </div>
    </div>
  </section>

  <!-- CONTACT / CTA -->
  <section class="py-16 border-t border-neutral-300/40 dark:border-neutral-700/40">
    <div class="max-w-3xl mx-auto px-4 text-center space-y-4">
      <p class="section-eyebrow">Contact</p>
      <h2 class="text-3xl font-bold tracking-tight">Envie de collaborer ?</h2>

      <p class="opacity-80">
        Je suis disponible pour des missions freelance, la crÃ©ation dâ€™outils mÃ©tiers ou lâ€™accompagnement sur des projets web.
      </p>

      <div class="flex flex-wrap justify-center gap-3 pt-2">
        <a href="/contact" class="btn-main">
          Me contacter
        </a>
        <a
          href="/services"
          class="inline-flex items-center justify-center rounded-full px-6 py-2.5 text-sm font-medium border border-neutral-300/70 dark:border-neutral-700/70 hover:bg-neutral-100 dark:hover:bg-neutral-900 transition-colors"
        >
          Voir mes services
        </a>
      </div>
    </div>
  </section>

</BaseLayout>




